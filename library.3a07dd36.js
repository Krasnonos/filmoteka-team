function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in l)return l[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return l[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a);const r=document.querySelector("#watched"),i=document.querySelector("#queue"),o=document.querySelector(".js-watched-text"),c=document.querySelector(".js-queue-text");i.addEventListener("click",(function(e){if(e.target.hasAttribute("data-current"))return;e.target.setAttribute("data-current","currentPage"),r.removeAttribute("data-current"),o.style.display="none",c.style.display="block"})),r.addEventListener("click",(function(e){if(e.target.hasAttribute("data-current"))return;e.target.setAttribute("data-current","currentPage"),i.removeAttribute("data-current"),c.style.display="none",o.style.display="block"})),e(S=a("2shzp")).defaults.baseURL="https://api.themoviedb.org";async function s(t){return await e(S)(`3/movie/${t}?api_key=c8ef48bae82b60cf66a4f0e6e3dd153e&language=en-US`)}var u=e(a("amrNH")).template({compiler:[8,">= 4.3.0"],main:function(e,t,l,n,a){var r,i=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery-list__item">\n    <div data-filmId="'+s(typeof(r=null!=(r=u(l,"filmId")||(null!=t?u(t,"filmId"):t))?r:o)===c?r.call(i,{name:"filmId",hash:{},data:a,loc:{start:{line:2,column:22},end:{line:2,column:32}}}):r)+'" class="gallery-list__card">\n        <button type="button" data-filmid="'+s(typeof(r=null!=(r=u(l,"filmId")||(null!=t?u(t,"filmId"):t))?r:o)===c?r.call(i,{name:"filmId",hash:{},data:a,loc:{start:{line:3,column:43},end:{line:3,column:53}}}):r)+'" class="remove-film-btn">\n            <svg class="remove-film-svg" width="26" height="30">\n                <use href="./images/icons.svg#icon-clear"></use>\n            </svg>\n        </button>\n\n        <div class="gallery-list__poster">\n            <img class="gallery-list__img" src="https://image.tmdb.org/t/p/w300'+s(typeof(r=null!=(r=u(l,"urlImg")||(null!=t?u(t,"urlImg"):t))?r:o)===c?r.call(i,{name:"urlImg",hash:{},data:a,loc:{start:{line:10,column:79},end:{line:10,column:89}}}):r)+'" alt="'+s(typeof(r=null!=(r=u(l,"title")||(null!=t?u(t,"title"):t))?r:o)===c?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:10,column:96},end:{line:10,column:105}}}):r)+'" loading="lazy" />\n        </div>\n\n        <div class="gallery-list__description">\n            <h2 class="gallery-list__titel">'+s(typeof(r=null!=(r=u(l,"title")||(null!=t?u(t,"title"):t))?r:o)===c?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:14,column:44},end:{line:14,column:53}}}):r)+'</h2>\n            <div class="gallery-list__info">\n\n                <p class="gallery-list__genre">'+s(typeof(r=null!=(r=u(l,"ganres")||(null!=t?u(t,"ganres"):t))?r:o)===c?r.call(i,{name:"ganres",hash:{},data:a,loc:{start:{line:17,column:47},end:{line:17,column:57}}}):r)+' | <span class="gallery-list__Year">'+s(typeof(r=null!=(r=u(l,"relisYer")||(null!=t?u(t,"relisYer"):t))?r:o)===c?r.call(i,{name:"relisYer",hash:{},data:a,loc:{start:{line:17,column:93},end:{line:17,column:105}}}):r)+'</span> </p>\n                <span class="gallery-list__rating">'+s(typeof(r=null!=(r=u(l,"ratting")||(null!=t?u(t,"ratting"):t))?r:o)===c?r.call(i,{name:"ratting",hash:{},data:a,loc:{start:{line:18,column:51},end:{line:18,column:62}}}):r)+"</span>\n\n            </div>\n        </div>\n    </div>\n</li>\n"},useData:!0});function d(e){let t="";return e.forEach((e=>{const l={filmId:e.id,title:e.name||e.title||"XXXX",urlImg:e.poster_path,relisYer:(e.release_date||e.first_air_date||"XXXX").slice(0,4),ganres:e.genres.map((({name:e})=>e)).slice(0,2).join(", ")||"XXXX",ratting:e.vote_average};t+=u(l)})),t}a("aFbFi"),a("hIjf5");let m=[];function f(e){m=[...e]}const g=document.querySelector("#watched"),y=document.querySelector("#queue"),p=document.querySelector(".gallery-list"),h=document.querySelector(".js-watched-text"),v=document.querySelector(".js-queue-text");async function b(e){const t=e.currentTarget.dataset.key,l=localStorage.getItem(t),n=JSON.parse(l);if(!n)return void(p.innerHTML="");const a=await n.map((e=>s(e))),r=(await Promise.all(a)).map((e=>e.data));p.innerHTML=d(r),f(r),"watched-films"===t?h.style.display="none":v.style.display="none"}function _(){const e=localStorage.getItem("watched-films");return JSON.parse(e)}var S;y.addEventListener("click",b),g.addEventListener("click",b),a("k1A4R"),a("8VnKz"),e(S=a("2shzp")).defaults.baseURL="https://api.themoviedb.org";async function q(t){return await e(S)(`3/movie/${t}?api_key=c8ef48bae82b60cf66a4f0e6e3dd153e`)}function w(e){var t;let l="";const n={filmId:e.id,title:e.name||e.title||"XXXX",urlImg:e.poster_path,relisYer:(e.release_date||e.first_air_date||"XXXX").slice(0,4),ganres:(null===(t=e.genres)||void 0===t?void 0:t.map((e=>e.name)).join(", "))||"XXXX",ratting:e.vote_average||0};return l+=u(n),l}var X=a("l0nkE");document.addEventListener("DOMContentLoaded",(async function(){!async function(e){try{let t="";for(let l=0;l<e.length;l++){t+=w((await q(e[l])).data)}X.refs.galleryListEl.insertAdjacentHTML("afterbegin",t)}catch(e){}}(_())}));const I=document.querySelector(".clear-library-btn"),k=document.querySelector(".gallery-list"),L=document.querySelector(".js-watched-text"),x=document.querySelector(".js-queue-text");I.addEventListener("click",(function(e){const t=document.querySelector('button[data-current="currentPage"]');(function(e){localStorage.removeItem(e),k.innerHTML=""})(t.dataset.key),"watched"===t.id?L.style.display="block":x.style.display="block"}));const j=document.querySelector(".gallery-list"),E=document.querySelector(".js-watched-text"),O=document.querySelector(".js-queue-text");j.addEventListener("click",(async function(e){if("svg"!==e.target.nodeName)return;const t=e.target.closest(".remove-film-btn").dataset.filmid,l=document.querySelector('button[data-current="currentPage"]').dataset.key;(function(e,t){const l=JSON.parse(localStorage.getItem(t)).filter((t=>t!==e));localStorage.setItem(t,JSON.stringify(l))})(t,l),function(e){if(0!==JSON.parse(localStorage.getItem(e)).length)return void console.log(localStorage.getItem(e));localStorage.removeItem(e),"watched-films"===e?E.style.display="block":O.style.display="block"}(l);const n=m.filter((({id:e})=>e!==Number(t)));j.innerHTML=d(n),f(n)}));
//# sourceMappingURL=library.3a07dd36.js.map
